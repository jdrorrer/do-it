"use strict";angular.module("doIt",["firebase","ngAnimate","ngCookies","ngTouch","ngSanitize","ngResource","ui.router","ui.bootstrap"]).config(["$stateProvider","$urlRouterProvider",function(t,s){t.state("home",{url:"/",templateUrl:"app/tasks/tasks.html",controller:"TasksCtrl"}).state("history",{url:"history",templateUrl:"app/history/history.html",controller:"HistoryCtrl"}),s.otherwise("/")}]).constant("FIREBASE_URI","https://do-it.firebaseio.com/"),angular.module("doIt").controller("TasksCtrl",["$scope","$filter","TaskHistory",function(t,s,a){t.taskHistory=a,t.tasks=a.tasks,t.task={},t.currentDate=(new Date).getTime(),t.priorities=["high","medium","low"],t.task.category="Current Tasks",t.task.newCategory="",t.tasks.$loaded(function(){for(var s=0;s<t.tasks.length;s++)t.taskHistory.setExpiredTask(t.tasks[s],s,t.currentDate)}),t.addCurrentTask=function(s){a.addTask(s),t.task.name=null}}]),angular.module("doIt").controller("HistoryCtrl",["$scope","$filter","TaskHistory",function(t,s,a){t.taskHistory=a,t.tasks=a.tasks}]),angular.module("doIt").service("TaskHistory",["$firebase","FIREBASE_URI","$filter",function(t,s,a){var e=new Firebase(s),i=t(e);return{tasks:i.$asArray(),activeTasks:a("filter")(this.tasks,"active",status),notActiveTasks:a("filter")(this.tasks,"!active",status),getTaskStatus:function(t){return"active"===t.status?!1:!0},addTask:function(t){var s=t.name,a=t.priority,e="active",i=(new Date).getTime(),l=t.category;t={name:s,status:e,priority:a,date:i,category:l},this.tasks.$add(t)},completeTask:function(t,s){this.tasks[s].status="completed",this.tasks.$save(s),console.log("Moved completed task to history")},reActivateTask:function(t,s){this.tasks[s].status="active",this.tasks.$save(s),console.log("Changed task status to active")},removeTask:function(t,s){this.tasks.$remove(s)},setExpiredTask:function(t,s,a){var e=864e5,i=a-t.date,l=Math.floor(i/e);l>=7&&"active"===this.tasks[s].status&&(this.tasks[s].status="expired",this.tasks.$save(s),console.log("'"+t.name+"' is older than 7 days. Changed status to 'expired' and moved to task history."))},setTaskClass:function(t){return"completed"===t.status?"completed":"expired"}}}]),angular.module("doIt").controller("NavbarCtrl",["$scope",function(t){t.date=new Date}]),angular.module("doIt").directive("deleteTask",["$firebase","FIREBASE_URI",function(t,s){return{template:'<i ng-click="onClick($parent.task, $parent.id)" class="fa fa-times-circle-o fa-3x" tooltip="Delete Task" tooltip-placement="right" ng-click="taskHistory.removeTask(task)"></i>',restrict:"E",replace:!0,scope:{},link:function(a){var e=new Firebase(s),i=t(e),l=i.$asArray();a.onClick=function(t,s){l.$remove(s),console.log("Permanently deleted task from history")}}}}]),angular.module("doIt").directive("createTaskList",["$compile",function(t){return{templateUrl:"../../app/task-lists/task-lists.html",restrict:"A",replace:!0,scope:{},link:function(s,a){a.html(templateUrl).show(),t(a.contents())(s)}}}]),angular.module("doIt").directive("completeTask",["$firebase","FIREBASE_URI",function(t,s){return{template:'<i ng-click="onClick($parent.task, $parent.id)" class="fa fa-check-circle-o fa-3x" tooltip="Complete Task" tooltip-placement="left"></i>',restrict:"E",replace:!0,scope:{},link:function(a){var e=new Firebase(s),i=t(e),l=i.$asArray();a.onClick=function(t,s){l[s].status="completed",l.$save(s),console.log("Moved completed task to history "+t.$id)}}}}]),angular.module("doIt").run(["$templateCache",function(t){t.put("app/history/history.html",'<div class="container"><div ng-include="\'components/navbar/navbar.html\'"></div><div class="task-list"><div class="task-list-head">Task History</div><div class="task-list-body"><ul class="tasks"><li ng-repeat="(id, task) in tasks" ng-class="taskHistory.setTaskClass(task)" ng-show="taskHistory.getTaskStatus(task)" ng-swipe-left="taskHistory.reActivateTask(task, id)" class="task task-history animate-swipe-lt">{{ task.name }}<delete-task></delete-task></li></ul></div></div><div ng-include="\'components/footer/footer.html\'"></div></div>'),t.put("app/task-lists/task-lists.html",'<div class="container"><div ng-include="\'components/navbar/navbar.html\'"></div><div class="create-task-list"><input ng-model="task.newCategory" type="text" class="create-list-input" placeholder="+ Create new task list..."> <button class="create-list-button">Create</button></div><div class="task-list"><div class="task-list-head">{{ task.category }}</div><div class="add-task-container"><div class="add-task-header"><div class="new-task-label">Task description</div><div class="priority-label">Priority</div></div><div class="add-task"><input ng-model="task.name" class="new-task" type="text" placeholder="Enter new task..."><div class="select-style"><select ng-model="task.priority" ng-options="priority for priority in priorities" class="priority"><option value="" disabled="" selected="">Select priority...</option></select></div><button class="add-btn" ng-click="addCurrentTask(task)">Add</button></div></div><div class="task-list-body"><ul class="tasks"><li ng-repeat="(id, task) in tasks | filter: task.category" ng-hide="taskHistory.getTaskStatus(task)" ng-init="checkExpiration(task, id)" ng-swipe-right="taskHistory.completeTask(task, id)" class="task animate-swipe-rt">{{ task.name }}<complete-task></complete-task><delete-task></delete-task></li></ul></div></div><div ng-include="\'components/footer/footer.html\'"></div></div>'),t.put("app/tasks/tasks.html",'<div class="container"><div ng-include="\'components/navbar/navbar.html\'"></div><div class="create-task-list"><input ng-model="task.newCategory" type="text" class="create-list-input" placeholder="+ Create new task list..."> <button class="create-list-button">Create</button></div><div class="task-list"><div class="task-list-head">{{ task.category }} <input ng-model="task.searchFilter" type="text" class="search-input" placeholder="Search tasks..."></div><div class="add-task-container"><div class="add-task-header"><div class="new-task-label">Task description</div><div class="priority-label">Priority</div></div><div class="add-task"><input ng-model="task.name" class="new-task" type="text" placeholder="Enter new task..."><div class="select-style"><select ng-model="task.priority" ng-options="priority for priority in priorities" class="priority"><option value="" disabled="" selected="">Select priority...</option></select></div><button class="add-btn" ng-click="addCurrentTask(task)">Add</button></div></div><div class="task-list-body"><ul class="tasks"><li ng-repeat="(id, task) in tasks | filter: task.searchFilter" ng-hide="taskHistory.getTaskStatus(task)" ng-swipe-right="taskHistory.completeTask(task, id)" class="task animate-swipe-rt">{{ task.name }}<complete-task></complete-task><delete-task></delete-task></li></ul></div></div><div ng-include="\'components/footer/footer.html\'"></div></div>'),t.put("components/footer/footer.html",'<div class="footer"><p>Made with â™¥ by Jake</p></div>'),t.put("components/navbar/navbar.html",'<nav class="navbar navbar-static-top navbar-inverse" role="navigation" ng-controller="NavbarCtrl"><div class="container-fluid" id="navfluid"><div class="navbar-header"><a class="navbar-brand" ui-sref="home">d<i class="fa fa-check-circle"></i>.it</a> <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#nav-collapse"><span class="sr-only">Toggle navigation</span> <span class="icon-bar"></span> <span class="icon-bar"></span> <span class="icon-bar"></span></button></div><div class="collapse navbar-collapse" id="nav-collapse"><ul class="nav navbar-nav"><li ui-sref-active="active"><a ui-sref="home">Active Tasks</a></li><li ui-sref-active="active"><a ui-sref="history">Task History</a></li></ul></div></div></nav>')}]);